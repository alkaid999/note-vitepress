# 用户与用户组概述

Linux 作为一种多用户多任务操作系统，具备强大的并发处理能力。它允许多个用户凭借各自的账户同时登录系统，每个用户能在独立的环境中执行各自的任务，这些任务相互独立、互不干扰，共同高效地在系统中运行，确保了不同用户的工作可以有条不紊地同步进行。

不同用户拥有严格区分的权限范围。系统通过精细的权限划分机制，保障每个用户只能在其被授权的范围内操作资源，有效防止了用户之间的越权访问行为。例如，普通用户无法随意执行只有超级用户（root）才具备权限的操作，像系统配置的更改、关键服务的管理等，这种权限管理机制不仅维护了系统的稳定性与安全性，还确保了用户数据的保密性和完整性。

若想使用 Linux 系统的丰富资源，用户需向系统管理员申请专属账户。账户和用户是等同的概念，它是用户进入系统的凭证。在登录时，用户必须准确输入对应的用户名和密码，只有验证通过后，才能顺利进入系统并抵达自己的主目录，进而开展后续操作，主目录通常作为用户存放个人文件和数据的私有空间，进一步增强了数据的安全性和私密性。

用户组在 Linux 系统中扮演着重要的角色，它是对具有相同特征或权限需求的用户的逻辑归类。当多个用户需要对同一文件或资源拥有相同访问权限时，创建用户组便显得尤为高效。通过赋予用户组特定的权限，然后将相关用户纳入该组，即可一次性实现权限的批量配置，避免了繁琐的逐个授权操作，极大地简化了用户权限管理的工作流程，尤其在面对大量用户时，用户组的优势更为凸显，有助于系统管理员高效地组织和管理用户，确保资源访问的合理性和便捷性。

## 用户（UID）

在 Linux 系统中，用户（User） 是一个具有特定权限和属性的实体，用于管理对系统资源的访问和操作。用户是 Linux 系统安全和多用户环境的核心概念之一。每个用户都有一个唯一的标识符，称为 用户 ID（User ID，简称 UID）。

**用户的主要作用是：**

- 管理资源访问：通过用户权限，控制对文件、目录、设备等资源的访问。
- 多用户支持：允许多个用户同时使用系统，每个用户都有独立的环境和权限。
- 安全隔离：通过权限管理，防止未经授权的访问或操作，保护系统安全。

**Linux 系统中的用户主要分为以下几类：**

- 超级用户（root）：拥有最高权限，可以访问和修改系统中的所有资源。其用户 ID（UID）为 0。
- 普通用户（Normal User）：具有有限的权限，通常只能访问自己的主目录和被授权的资源。普通用户的 UID 通常从 1000 开始。
- 系统用户（System User）：用于运行特定的服务或守护进程（如 apache、mysql 等）。这些用户通常没有登录权限，其 UID 通常在 1 到 999 之间。

其中 UID 是 Linux 系统中用于唯一标识用户的数字。每个用户都有一个唯一的 UID，系统通过 UID 来识别和管理用户，而不是通过用户名。

**UID 的作用：**

- 身份识别：Linux 内核使用 UID 来区分不同用户，当用户登录系统或者执行某个进程时，系统通过 UID 确定是哪个用户在操作。例如，当用户使用 `ls -l` 命令查看文件权限时，显示的文件所有者和所属组，系统底层实际上是依据 UID 来判断。
- 权限管理：UID 是 Linux 系统进行权限控制的重要依据。每个文件和目录都有对应的属主（用户）和权限设置，系统根据操作发起者的 UID 来判断其是否有足够权限对文件或目录进行读、写、执行等操作。比如，文件 test.txt 的属主是 UID 为 1001 的用户，只有该 UID 对应的用户或者有特殊权限的用户才能修改这个文件。
- 资源分配：系统管理员可以根据 UID 对用户使用的系统资源进行管理和分配，例如限制特定 UID 用户的磁盘使用空间、CPU 时间等，以确保系统资源的合理使用。
- 系统安全：通过管理 UID，可以增强系统的安全性。例如，将一些关键服务以特定的低权限 UID 运行，即使服务出现漏洞被攻击，攻击者也只能获得该 UID 所拥有的有限权限，从而降低系统被入侵的风险。

**UID 的范围：**

- 0：UID 为 0 的用户是超级用户（root），拥有系统中最高的权限。
- 1-999：这些 UID 通常分配给系统用户（System User）。系统用户用于运行特定的服务或守护进程（如 apache、mysql 等），它们通常没有登录权限。
- 1000 及以上：这些 UID 通常分配给普通用户（Normal User）。普通用户可以登录系统，并拥有有限的权限。

## 用户组

在 Linux 系统中，用户组（Group） 是一种用于管理和组织用户权限的机制。用户组可以将多个用户归类到一个集合中，从而简化权限管理。通过为用户组分配权限，可以间接地为组内的所有用户分配相同的权限。用户组是 Linux 系统安全和资源管理的重要组成部分。

与用户（User）类似，用户组也有一个唯一的标识符，称为 组 ID（Group ID，简称 GID）。系统通过 GID 来识别和管理用户组。

**用户组的主要作用是：**

- 简化权限管理：通过为用户组分配权限，可以同时为组内的所有用户设置相同的访问权限，避免逐个设置用户权限的繁琐操作。
- 增强安全性：可以通过用户组限制用户对某些资源的访问，从而保护系统资源的安全。
- 提高效率：方便系统管理员批量管理用户权限，尤其在多用户环境中，用户组可以显著简化管理任务。

**用户组主要分为以下两种类型：**

- 主用户组：每个用户都有一个主用户组。当用户创建文件或目录时，该文件或目录默认属于用户的主用户组。用户的主用户组在用户创建时指定，可以通过修改用户属性来更改。
- 附加用户组：用户可以属于多个附加用户组。附加用户组用于扩展用户的权限，使用户能够访问更多资源。用户的附加用户组可以通过系统管理命令添加或移除。

与用户（User）类似，用户组也有一个唯一的标识符，称为 组 ID（Group ID，简称 GID）。系统通过 GID 来识别和管理用户组。可以使用 `id` 命令可以显示用户的 UID、GID 以及用户所属的其他组的 GID。

```shell
[root@localhost ~]# id root
uid=0(root) gid=0(root) groups=0(root)
[root@localhost ~]# id sshd
uid=74(sshd) gid=74(sshd) groups=74(sshd)
```

## 用户和组的关系

在 Linux 系统中，用户和用户组是多对多的关系，它们之间通过 GID（组 ID）进行关联，这种关系在系统管理和权限分配等方面起着重要作用，具体表现如下：

用户属于一个或多个用户组：

- 主用户组：每个用户都有一个主用户组，在用户创建时会默认分配一个主用户组，用户对其主用户组拥有特定的权限。例如，当用户新建一个文件时，如果没有特别指定，文件的所属组就是该用户的主用户组。
- 附加用户组：除了主用户组外，用户还可以同时属于多个附加用户组。这使得用户可以根据不同的工作需求或权限要求，访问不同用户组所拥有的资源。比如，一个开发人员可能同时属于开发组和测试组，这样他就可以访问这两个组相关的文件和资源。

用户组包含一个或多个用户：

- 用户管理：用户组是一种将具有相同权限需求或工作性质的用户进行分组管理的方式。例如，在一个企业中，可以创建一个名为「财务」的用户组，将所有财务人员添加到这个组中，方便对他们进行统一的权限设置和管理。
- 权限继承：用户组中的用户会继承该用户组所拥有的权限。当为一个用户组设置了对某个文件或目录的特定权限后，该用户组中的所有用户都可以根据这些权限来访问相应的资源。比如，「财务」用户组对财务数据文件夹有读写权限，那么组内的所有用户都可以对该文件夹进行读写操作。

权限管理的基础：

- 精细权限控制：通过用户和用户组的关系，可以实现非常精细的权限控制。系统管理员可以根据不同的任务和资源需求，为不同的用户组分配不同的权限，然后将用户添加到相应的用户组中，从而实现对用户访问系统资源的精确管理。例如，对于一个数据库服务器，管理员可以创建「数据库管理员」用户组，赋予该组对数据库的所有操作权限，然后将负责数据库管理的人员添加到这个组中；同时创建「普通用户」组，只赋予该组对数据库的查询权限，将普通员工添加到这个组中。
- 权限调整：当用户的工作内容或权限需求发生变化时，可以通过将用户添加到不同的用户组或从某些用户组中移除的方式，来快速调整用户的权限。比如，一个员工从开发部门调到了测试部门，管理员只需将该员工从开发组移除，添加到测试组，就可以使其获得测试组的权限，而无需单独为其重新设置各项权限。
