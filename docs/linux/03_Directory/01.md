# 目录结构

Linux 系统与 Windows 系统在文件管理方式上存在显著差异。Linux 不使用驱动器字母（如 C 盘、D 盘）来组织文件，而是采用单一的根目录作为文件系统层次结构的起点。所有文件和目录都以树状结构从根目录延伸出来。这种方法的主要优势在于，开发者可以使用统一的 API 和工具集来访问和管理系统中的资源。

> [!TIP]
> 在 Linux 中，无论是读取普通文件、系统状态、套接字还是管道，通常都可以通过 `read` 系统调用来实现；同样，无论是写入文件、系统参数、套接字还是管道，通常都可以通过 `write` 系统调用来完成。这种统一的接口简化了编程模型，使得开发者能够更容易地理解和使用系统资源。
>
> 然而，这种结构也有其不便之处。在 Linux 中，要使用任何硬件设备，通常需要将其挂载到文件系统的某个目录下。这是因为 Linux 将设备也视为文件，并且必须通过挂载操作将设备文件整合到文件系统的目录树中，以便用户和程序能够访问它们。

Linux 的文件系统采用分层式的树状目录结构，其中最顶层是根目录，表示为 `/`。这个根目录是 Linux 文件系统的基石，所有其他目录和文件都从这里开始分支。在根目录下，分布着多个关键的一级子目录，例如 `/etc`、`/home`、`/dev` 等，它们各自承载着系统运行和用户数据的重要角色。

每个一级目录进一步包含自己的子目录，形成二级目录，如 `/home/user1`、`/dev/sda` 等。这些目录层层嵌套，构成了一个清晰的树形结构，其中根目录就像树根一样，为整个文件系统提供了坚实的基础。这种结构不仅使得文件和目录的管理变得有序，而且也便于用户和系统管理员进行导航和维护。

<LiteTree>
link=data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDQ4IDQ4Ij48IS0tIEljb24gZnJvbSBJY29uUGFyayBPdXRsaW5lIGJ5IEJ5dGVEYW5jZSAtIGh0dHBzOi8vZ2l0aHViLmNvbS9ieXRlZGFuY2UvSWNvblBhcmsvYmxvYi9tYXN0ZXIvTElDRU5TRSAtLT48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjQiIGQ9Ik0yNC43MDcgOS41NjVMOS44NTggMjQuNDE1YTkgOSAwIDAgMCAwIDEyLjcyN3YwYTkgOSAwIDAgMCAxMi43MjggMGwxNy42NzgtMTcuNjc3YTYgNiAwIDAgMCAwLTguNDg2djBhNiA2IDAgMCAwLTguNDg2IDBMMTQuMTAxIDI4LjY1N2EzIDMgMCAwIDAgMCA0LjI0M3YwYTMgMyAwIDAgMCA0LjI0MiAwbDE0Ljg1LTE0Ljg1Ii8+PC9zdmc+
---
/ 目录
    afs/
    [link]bin( -> usr/bin)
    boot/
    dev/
    etc/
    home/
    [link]lib( -> usr/lib)
    [link]lib32( -> usr/lib32)
    [link]lib64( -> usr/lib64)
    media/
    mnt/
    opt/
    proc/
    root/
    run/
    [link]sbin( -> usr/sbin)
    srv/
    sys/
    tmp/
    usr/
    var/
</LiteTree>

由于 Linux 系统采用免费开源模式，市场上存在众多的 Linux 发行版，同时众多团队也基于 Linux 进行产品开发。若缺乏统一的指导原则，任由各个团队根据各自的偏好配置系统文件目录，长远来看可能会引发一系列管理上的挑战和问题。

因此，Linux 基金会制定了 FHS（Filesystem Hierarchy Standard）标准，以确保不同 Linux 发行版之间的一致性和兼容性。通过遵循 FHS 标准，各个团队能够在一个标准化的文件系统结构中工作，这有助于提高系统的可管理性、可维护性和整体的用户体验。FHS 为文件和目录的组织提供了明确的指导，从而减少了因配置不一致而产生的管理难题，确保了 Linux 系统的健康和可持续发展。

## FHS

FHS（Filesystem Hierarchy Standard，文件系统层次结构标准）是一个为 Linux 和 Unix-like 操作系统定义文件和目录层次结构的标准。它旨在提供一个统一的文件系统布局，使得软件开发者和系统管理员能够在不同的 Linux 系统上更容易地理解每个目录的作用。

FHS 的核心目标是确保软件能够在安装时预测文件和目录的位置，同时也让用户能够预测这些位置。这个标准有助于保持不同 Linux 发行版之间的一致性，使得用户和开发者能够预测文件和目录的位置，无需额外的配置即可运行软件。

FHS 标准规定了 Linux 系统中所有一级目录以及部分二级目录的用途。它定义了如下的内容：

- 定义了文件系统中每个区域的用途
- 定义了所需要的最小构成的文件和目录
- 给出了例外处理和矛盾的特殊例子

同时，FHS 根据文件系统使用的频繁与否以及是否允许用户随意改动，将目录定义为四种交互作用形态：

- **可分享的**（Shareable）：这些目录中的文件可以在多个系统之间共享。例如，`/usr` 和 `/opt` 目录中的文件通常是可分享的，因为它们包含的程序和库可以在多个系统上使用
- **不可分享的**（Unshareable）：这些目录中的文件不能在多个系统之间共享。例如，`/etc` 目录中的配置文件和 `/var/run` 目录中的运行时数据是不可分享的，因为它们特定于单个系统
- **不变的**（Static）：这些目录中的文件在系统运行时不会频繁更改。例如，`/usr` 目录中的程序和库文件通常是不变的，因为它们在安装后很少更改。
- **可变动的**（Variable）：这些目录中的文件在系统运行时会频繁更改。例如，`/var` 目录中的日志文件和 `/tmp` 目录中的临时文件是可变动的，因为它们会随着系统的运行而不断变化

FHS 的目录结构设计考虑了易用性、可维护性和一致性，它允许系统管理员根据需要调整和优化文件系统的布局。通过遵循 FHS，Linux 社区能够保持高效和有序的发展。FHS 认为，Linux 系统的根目录最为重要（没有之一），其原因有以下 2 点：

1. 所有目录都是由根目录衍生出来的
2. 根目录与系统的开机、修复、还原密切相关

因此，根目录必须包含开机软件、核心文件、开机所需程序、函数库、修复系统程序等文件：

| 目录     | 简介                                                                               |
| -------- | ---------------------------------------------------------------------------------- |
| `/bin`   | 存放基本的二进制文件，这些是所有用户都需要的命令，如`ls`、`cp`、`mv`等             |
| `/boot`  | 存放引导加载程序所需的文件，如内核映像和启动参数文件                               |
| `/dev`   | 包含设备文件，这些是访问系统硬件设备的接口，如`/dev/sda`表示第一个 SATA 硬盘       |
| `/etc`   | 包含系统配置文件，如用户账户信息、网络配置、服务启动脚本等                         |
| `/lib`   | 存放共享库和内核模块，这些库文件为系统和应用程序提供共享代码                       |
| `/media` | 用于挂载可移动媒体设备的挂载点，如 USB 驱动器、CD-ROM 等                           |
| `/mnt`   | 用于临时挂载文件系统的挂载点，通常用于手动挂载                                     |
| `/opt`   | 用于存放可选的应用程序软件包，这些通常不是系统默认安装的软件                       |
| `/run`   | 存放与当前运行进程相关的数据，如 PID 文件、锁文件等                                |
| `/sbin`  | 存放系统管理员使用的二进制文件，如`fdisk`、`ifconfig`等                            |
| `/srv`   | 存放由系统提供的服务的数据，如网站的数据文件、FTP 服务器的文件等                   |
| `/tmp`   | 存放临时文件，这些文件在系统重启时会被删除                                         |
| `/usr`   | 存放用户级的二进制文件、库文件、文档等，是一个重要的目录，包含了大多数用户应用程序 |
| `/var`   | 存放经常变化的文件，如日志文件、数据库文件、邮件队列等                             |

> [!TIP]
> 当前的 FHS 版本是 3.0，于 2015 年 6 月 3 日公布。更多详细信息可以在 FHS 的官方文档中找到。<https://refspecs.linuxfoundation.org/fhs.shtml>

## 常见目录

除了 FHS 规定的一级目录外，Linux 系统根目录下通常还包含下面几个一级目录：

| 目录          | 简介                                                                                                                                                                                                                                                                                                                                                                                        |
| ------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `/lost+found` | 这是一个特殊的目录，通常存在于使用 ext3 或 ext4 文件系统的分区中。当系统发生意外崩溃或非正常关机后，文件系统可能会留下一些碎片。在系统启动过程中，`fsck`（文件系统检查）工具会扫描这些分区，并尝试恢复损坏的文件，将找到的文件碎片存放在这个目录中。每个分区都可能有自己的 `/lost+found` 目录，例如，根分区的恢复目录就是 `/lost+found`，而 `/boot` 分区的恢复目录可能是 `/boot/lost+found` |
| `/proc`       | `/proc` 是一个虚拟文件系统，它并不存储在硬盘上，而是在内存中。这个目录提供了一个接口，用于获取系统运行时的信息。它包含了关于系统内核、进程、外部设备状态和网络状态的详细信息。例如，`/proc/cpuinfo` 包含了 CPU 的信息，`/proc/devices` 列出了系统中的设备驱动，`/proc/filesystems` 显示了支持的文件系统类型，而 `/proc/net` 则包含了网络协议的信息                                          |
| `/sys`        | `/sys` 也是一个虚拟文件系统，与 `/proc` 类似，它存储在内存中，并且提供了关于系统硬件和内核状态的信息。这个目录主要用于内核与用户空间之间的通信，它提供了一种机制，允许用户空间程序获取和设置内核对象的属性。例如，设备驱动程序的状态和硬件设备的信息都可以在 `/sys` 目录中找到                                                                                                              |

### /etc 目录

`/etc` 目录在 Linux 系统中是一个非常重要的目录，它用于存放系统级别的配置文件和脚本。这个目录中的文件通常由系统管理员维护，它们控制着系统的各种设置和程序的行为。`/etc` 目录中的文件通常在系统安装和软件安装过程中被创建和修改。管理员可以通过编辑这些配置文件来定制系统和应用程序的行为。

由于这些文件对系统的正常运行至关重要，因此建议只有经验丰富的用户或管理员在了解可能的副作用的情况下才去修改它们。以下是 `/etc` 目录的一些常见子目录及其功能的简要说明：

| 目录              | 简介                                                                                                                           |
| ----------------- | ------------------------------------------------------------------------------------------------------------------------------ |
| `/etc/init.d`     | 存放系统服务的启动脚本，用于启动或停止守护进程。在一些旧的 Linux 发行版中，如 Red Hat 系列，`/etc/init.d` 是启动脚本的主要目录 |
| `/etc/rc.d`       | 在某些系统中，存放启动脚本，与 `/etc/init.d` 类似，具体使用取决于发行版                                                        |
| `/etc/sysconfig`  | Red Hat 系列 Linux 发行版存放系统服务的配置脚本，如网络服务、防火墙等                                                          |
| `/etc/networks`   | 包含网络名称和它们对应的网络号码的映射                                                                                         |
| `/etc/hosts`      | 将主机名映射到 IP 地址，用于本地 DNS 解析                                                                                      |
| `/etc/passwd`     | 存储系统用户的账号信息，包括用户名、密码、用户 ID（UID）、组 ID（GID）等                                                       |
| `/etc/shadow`     | 存储加密的用户密码和账户过期信息，只有 root 用户才能访问。                                                                     |
| `/etc/group`      | 列出系统中定义的所有用户组，每个用户组都有一个唯一的组 ID（GID）                                                               |
| `/etc/gshadow`    | 包含组密码和组成员信息，只有 root 用户才能访问                                                                                 |
| `/etc/fstab`      | 包含文件系统信息，用于磁盘挂载                                                                                                 |
| `/etc/ld.so.conf` | 动态链接器配置文件，控制共享库的搜索路径                                                                                       |
| `/etc/ssh/`       | 包含 SSH 服务的配置文件，如 `sshd_config`                                                                                      |
| `/etc/xdg/`       | 存放桌面环境和应用程序的配置文件                                                                                               |

### /usr 目录

根据 FHS 标准，`/usr` 目录是 Linux 系统中用于存放可分享且通常是静态的数据的主要目录。这里的数据设计为在多用户和多系统之间共享，且不经常变动。通过 NFS 等网络共享服务，`/usr` 目录可以被网络中的其他主机访问，使得软件资源能够在不同系统间共享。

`/usr` 目录的名称来源于「Unix Software Resource」，意指 Unix 操作系统软件资源的存储地。FHS 鼓励软件开发者将应用程序安装到 `/usr` 目录下的适当子目录中，而不是创建新的顶级目录，这有助于维护文件系统的清晰结构和一致性。

`/usr` 目录包含了系统默认安装的软件，包括操作系统发行版自带的应用程序和库文件。它的作用类似于 Windows 系统中的 `C:\Windows\` 和 `C:\Program Files\` 两个目录的结合体，通常占用了系统中相当大的磁盘空间。这个目录是系统软件资源的核心，包含了用户程序的二进制文件、库文件、头文件、文档等。对于用户自行安装的非系统级程序，建议存放在 `/usr/local` 目录下。这样的安排有助于在系统升级或更换新的操作系统发行版时保持用户安装的程序不变，避免了重新安装的需要，同时也使得系统升级过程更加平滑。

在 Linux 系统中，`/usr` 目录是存储系统软件资源的关键位置，它的合理使用对于保持系统的整洁、有序和高效至关重要。以下是 `/usr` 目录的一些常见子目录及其功能的简要说明：

| 目录           | 简介                                                                                                                                                            |
| -------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `/usr/bin`     | 存放用户可执行的二进制文件，这些命令对所有用户都可用，且与系统启动无关，即在单用户模式下通常不可执行                                                            |
| `/usr/sbin`    | 存放系统管理命令，这些命令通常只有 root 用户才能执行，且对于根文件系统来说不是必需的                                                                            |
| `/usr/lib`     | 存放应用程序调用的库文件，这些库文件为系统和应用程序提供共享代码                                                                                                |
| `/usr/X11R6`   | 在一些系统中，这个目录用于存放 X Window 系统的相关文件                                                                                                          |
| `/usr/local`   | 用于存放手工安装的软件。通常建议将从源代码编译安装的软件放置在此目录下，以便于管理                                                                              |
| `/usr/share`   | 存放共享数据，如帮助文档、图标、字体等。这些数据通常是只读的，不会被修改。                                                                                      |
| `/usr/src`     | 通常用于存放源代码，包括系统内核源代码和应用程序的源代码。不过，一些发行版可能推荐将手动下载的源代码包放置在 `/usr/local/src` 目录中，以便于管理                |
| `/usr/include` | 存放 C/C++ 等编程语言的头文件，这些文件通常用于编译时的代码引用。头文件包含了函数原型、宏定义、结构体声明等，用于在编译时告诉编译器如何使用库函数或自定义的函数 |

### /var 目录

`/var` 目录是 Linux 系统中用于存放变量数据的目录，其名称来源于「variable」（可变的）。这个目录包含了在系统运行过程中不断变化的文件，如日志文件、缓存文件以及某些服务或应用程序运行时产生的临时文件。随着系统的使用，`/var` 目录可能会占用越来越多的磁盘空间，因为它包含了许多随着时间推移而增长的数据。`/var` 包括系统一般运行时要改变的数据，具有不可共享性。每个系统是特定的，即不通过网络与其他计算机共享。

以下是 `/var` 目录下一些常见子目录及其功能的简要说明：

| 目录         | 简介                                                                                                                                                                         |
| ------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `/var/lib`   | 存放系统正常运行时会改变的库文件，这些文件通常由系统服务和应用程序使用。例如，`/var/lib/mysql` 目录存放 MySQL 数据库的文件                                                   |
| `/var/local` | 存放在 `/usr/local` 中安装的程序的可变数据。这些数据可能会随着程序的运行而变化                                                                                               |
| `/var/lock`  | 存放锁定文件，用于确保多个程序不会同时访问同一资源，防止冲突和数据损坏                                                                                                       |
| `/var/log`   | 存放各种程序的日志文件，包括系统日志、应用程序日志和登录记录。这些日志对于监控系统状态和排错非常重要。例如，`/var/log/syslog` 存放系统日志，`/var/log/auth.log` 存放认证日志 |
| `/var/run`   | 存放系统运行时的临时文件，如当前登录用户信息和正在运行的进程信息。这些文件通常在系统重启时被清除。例如，`/var/run/sshd.pid` 存放 SSH 服务的进程 ID                           |
| `/var/spool` | 存放等待处理的数据，如邮件队列、新闻组文章和打印任务。每个服务通常有自己的子目录。例如，`/var/spool/mail` 存放邮件队列，`/var/spool/cron` 存放计划任务队列                   |
| `/var/tmp`   | 存放临时文件，这些文件比`/tmp`目录中的文件有更长的生命周期，但仍然可能在系统重启后被删除                                                                                     |

## 文件类型

在 Linux 世界中，**一切皆是文件**，这个概念意味着系统中的所有内容，无论是实际的文件、目录、设备，还是进程和网络套接字，都被视为文件系统中的文件。这种统一的抽象简化了系统的设计和使用。

在 Linux 文件系统中，文件类型是区分文件性质和用途的重要属性。以下是 Linux 中常见的文件类型及其描述：

| 文件类型                              | 模式标志 | 描述                                                                                                  |
| ------------------------------------- | -------- | ----------------------------------------------------------------------------------------------------- |
| 普通文件（Regular File）              | `-`      | 这是最基本的文件类型，用于存储数据和程序。例如，文本文件、数据文件和可执行程序都是普通文件。          |
| 目录文件（Directory File）            | `d`      | 目录文件用于组织和管理文件系统中的文件和子目录。每个目录都包含了指向其他文件或目录的指针。            |
| 字符设备文件（Character Device File） | `c`      | 这些文件代表字符设备，如键盘、鼠标、串口等。它们以字符为单位进行数据传输。                            |
| 块设备文件（Block Device File）       | `b`      | 块设备文件代表块设备，如硬盘、USB 驱动器、CD-ROM 等。它们以数据块为单位进行数据传输。                 |
| 符号链接文件（Symbolic Link）         | `l`      | 符号链接是一种特殊类型的文件，它包含了对另一个文件或目录的引用。符号链接类似于 Windows 中的快捷方式。 |
| 管道文件（Named Pipe）                | `p`      | FIFO 是一种特殊类型的文件，用于进程间的通信。它允许数据从一个进程流向另一个进程。                     |
| 套接字文件（Socket）                  | `s`      | 套接字文件用于网络通信，允许进程通过网络进行数据交换。                                                |

在 Linux 系统中可以使用 `ls -l` 命令来查看文件的类型。输出的第一列将显示文件类型，例如：

```bash
ls -al /dev
```

```console
crw-r--r--. 1 root root     10, 235 Oct 11 09:39 autofs
drwxr-xr-x. 2 root root         360 Oct 11 09:39 block
……
lrwxrwxrwx. 1 root root           3 Oct 11 09:39 cdrom -> sr0
……
```

在这个例子中，可以看到每行的第一列中第一个字符表示文件类型。如 `autofs` 第一个字符是 `c`，表示这是一个字符设备文件；`block` 第一个字符是 `d`，表示这是一个目录文件；`cdrom` 第一个字符是 `l`，表示这是一个符号链接。符号链接类似于 Windows 中的快捷方式，它指向另一个文件或目录。

还可以使用 `stat` 命令，查看文件的详细属性，包括文件类型、权限、所有者等信息。例如：

```bash
stat anaconda-ks.cfg
```

```console
  File: anaconda-ks.cfg
  Size: 748             Blocks: 8          IO Block: 4096   regular file
Device: 253,0   Inode: 33906685    Links: 1
Access: (0600/-rw-------)  Uid: (    0/    root)   Gid: (    0/    root)
Context: system_u:object_r:admin_home_t:s0
Access: 2025-07-04 10:11:37.129331464 +0800
Modify: 2025-07-04 10:11:37.158331463 +0800
Change: 2025-07-04 10:11:37.158331463 +0800
 Birth: 2025-07-04 10:11:37.129331464 +0800
```
