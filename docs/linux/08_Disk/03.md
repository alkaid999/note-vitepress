# 设备基础

在 Linux 的世界里，一切皆文件，物理硬件也不例外。操作系统通过特殊的 ​​设备文件 (Device Files)​​ 来访问和管理硬件。对于硬盘和 SSD 这类存储设备，它们对应的设备文件位于系统的 `/dev/` 目录下。

## 块设备的概念

块设备（Block Device）是一种以固定大小的「块」（通常是 512 字节、4KB 等）为单位进行数据读写的硬件设备，是操作系统对存储设备的抽象分类之一。

> [!TIP] 块设备
> 块设备是操作系统对能存储数据的硬件的一种统一称呼（抽象接口），而硬盘（包括机械硬盘、SSD、U 盘等）是最典型、最常见的块设备实例。​

块设备的核心特点：

- **按块操作**：数据的读写必须以「块」为最小单位（例如一次至少读写 512 字节），而不能像键盘、鼠标那样按单个字符（字节）逐个处理。这是块设备最核心的特征。
- **支持缓存**：操作系统会为块设备分配缓存（如内存中的页缓存），暂时存储频繁访问的数据，减少直接读写硬件的次数，提高效率。例如，修改一个文件后，数据可能先存在缓存中，稍后再批量写入硬盘。
- **可随机访问**：块设备支持随机访问，即可以直接定位到任意块的位置读写数据，而不需要按顺序从头开始。例如，可以直接打开一个视频的中间段落，就是依赖硬盘的随机访问能力。

常见的块设备：

- **硬盘**：机械硬盘（HDD）、固态硬盘（SSD）、NVMe 硬盘等
- **移动存储**：U 盘、移动硬盘、SD 卡等
- **虚拟设备**：虚拟机中的虚拟硬盘（如 `/dev/vda`）、RAID 阵列（多块硬盘组合成的逻辑设备）等

与字符设备的对比：

| 特性     | 块设备             | 字符设备                   |
| -------- | ------------------ | -------------------------- |
| 数据单位 | 固定大小的块       | 单个字符（字节）           |
| 访问方式 | 支持随机访问       | 通常只能顺序访问           |
| 缓存机制 | 有缓存（提高效率） | 一般无缓存（实时性要求高） |
| 典型设备 | 硬盘、U 盘、SD 卡  | 键盘、鼠标、打印机、串口   |

块设备是一种支持按固定大小的数据块进行随机读写的存储设备（或抽象设备）。​​ 它是硬盘、SSD、U 盘等物理存储介质以及 LVM 逻辑卷等抽象存储实体的操作系统表示形式。Linux 通过 `/dev/` 目录下的特殊文件来访问块设备，所有针对硬盘的底层操作（分区、格式化）和文件系统的操作（读写文件）最终都转化为对块设备的块级 I/O 操作。理解块设备是管理 Linux 存储的基础。

## 块设备命名规则

在 Linux 系统中，硬盘（块设备）的命名遵循一套标准化规则，名称通常反映设备类型、连接方式和序号等信息。命名规则的核心原则：

1. **基于设备类型和接口**：名称前缀标识设备使用的接口类型（如 SATA、NVMe、USB 等）。
2. **序号区分同类设备**：同类型设备按检测顺序用数字编号（如 `sda`、`sdb` 等）。
3. **分区标识**：设备名称后加数字表示分区（如 `sda1` 是 `sda` 的第一个分区）。

| 设备类型              | 前缀 / 命名格式                                                 | 命名说明                                                               | 示例                                                                                 |
| --------------------- | --------------------------------------------------------------- | ---------------------------------------------------------------------- | ------------------------------------------------------------------------------------ |
| SATA/SCSI/USB 设备    | `sd` + 字母 + 分区号（可选）                                    | 字母 `a/b/c...` 表示同类型设备序号（按检测顺序）；数字表示分区         | `/dev/sda`（第一块设备）、`/dev/sdb3`（第二块设备的第三个分区）                      |
| NVMe 固态硬盘         | `nvme` + 控制器序号 + `n` + 命名空间序号 + `p` + 分区号（可选） | 控制器序号从 0 开始；命名空间通常从 1 开始；`p` 表示分区               | `/dev/nvme0n1`（第一控制器第一个命名空间）、`/dev/nvme0n1p2`（上述设备的第二个分区） |
| IDE 设备（旧接口）    | `hd` + 字母 + 分区号（可选）                                    | 字母 `a/b...` 表示主从设备（`hda` 为主盘，`hdb` 为从盘）；数字表示分区 | `/dev/hda`（第一块 IDE 硬盘）、`/dev/hdb1`（第二块 IDE 硬盘的第一个分区）            |
| LVM 逻辑卷            | `/dev/mapper/卷组-逻辑卷` 或 `/dev/卷组名/逻辑卷`               | 位于 `mapper` 目录或卷组名下，由逻辑卷管理系统生成                     | `/dev/mapper/ubuntu--vg-root`、`/dev/myvg/mylv`                                      |
| RAID 阵列（软 RAID）  | `md` + 数字                                                     | 数字表示 RAID 设备序号，由 `mdadm` 工具管理                            | `/dev/md0`（第一个 RAID 阵列）                                                       |
| Loop 设备（镜像挂载） | `loop` + 数字                                                   | 数字表示虚拟设备序号，用于挂载镜像文件                                 | `/dev/loop0`（第一个 loop 设备）                                                     |
| MMC/SD 卡             | `mmcblk` + 数字 + `p` + 分区号（可选）                          | 数字表示设备序号；`p` 表示分区                                         | `/dev/mmcblk0`（第一块 SD 卡）、`/dev/mmcblk0p1`（其第一个分区）                     |

## 常用管理命令

查看 Linux 硬盘，可通过以下命令快速获取设备信息，包括识别、分区、容量、IO、硬件状态等，为后续存储管理操作（分区、格式化等）及故障排查提供基础数据支持。

### df（查看磁盘使用情况）

`df`（Disk Free）是 Linux 系统中用于查看文件系统磁盘空间使用情况，主要展示 **已挂载** 文件系统的总容量、已用空间、可用空间及挂载点等信息。

```shell
df [选项] [文件/目录]
```

| 常见选项 | 作用                                            |
| -------- | ----------------------------------------------- |
| `-h`     | 以人类易读的格式（如 K、M、G）显示容量单位      |
| `-a`     | 显示所有文件系统，包括大小为 0 的虚拟文件系统   |
| `-T`     | 在输出中添加一列“文件系统类型（FSType）         |
| `-t`     | 仅显示指定类型（如 ext4, xfs, nfs）的文件系统。 |
| `-x`     | 排除指定类型的文件系统                          |
| `-i`     | 显示 `inode` 使用情况而非磁盘空间               |

| 参数        | 作用                                                                                              |
| ----------- | ------------------------------------------------------------------------------------------------- |
| `文件/目录` | 只显示指定文件 / 目录所在的文件系统的信息，如果不指定文件或目录，默认显示所有已挂载的文件系统信息 |

```bash
df -h
```

```console
Filesystem           Size  Used Avail Use% Mounted on
/dev/mapper/rl-root   17G  2.5G   15G  15% /
devtmpfs             4.0M     0  4.0M   0% /dev
tmpfs                836M     0  836M   0% /dev/shm
tmpfs                335M  6.3M  329M   2% /run
tmpfs                1.0M     0  1.0M   0% /run/credentials/systemd-journald.service
/dev/nvme0n1p2       960M  247M  714M  26% /boot
tmpfs                1.0M     0  1.0M   0% /run/credentials/getty@tty1.service
tmpfs                168M  4.0K  168M   1% /run/user/0
```

各列含义：

- `Filesystem`：存储设备或分区
- `Size`：总磁盘空间
- `Used`：已使用空间
- `Avail`：可用空间
- `Use%`：使用率
- `Mounted on`：挂载点（文件系统挂载到的目录）

可以看到 `df -h` 输出显示系统各挂载点的磁盘使用情况：

- 根分区（`/`）通过 LVM 管理（设备路径 `/dev/mapper/rl-root`），总容量 17G，已用 2.5G（使用率 15%），空间充足
- 启动分区（`/boot`，对应物理分区 `/dev/nvme0n1p2`）总 960M，已用 247M（26%），状态正常
- 其余多为 `devtmpfs` 或 `tmpfs` 类型的虚拟文件系统（如 `/dev`、`/dev/shm`、`/run` 等），这些分区不占用实际磁盘空间，主要用于存储临时数据或设备信息

当前使用率均极低（0%-2%），整体系统磁盘资源充裕，无空间压力。

示例：

1. 显示指定的文件系统

    ```bash
    df -Tt xfs
    ```

    ```console
    Filesystem          Type 1K-blocks    Used Available Use% Mounted on
    /dev/mapper/rl-root xfs   17756160 2548888  15207272  15% /
    /dev/nvme0n1p2      xfs     983040  252868    730172  26% /boot
    ```

2. 查看 Inode 使用情况

    ```bash
    df -hi
    ```

    ```console
    Filesystem          Inodes IUsed IFree IUse% Mounted on
    /dev/mapper/rl-root   8.5M   42K  8.5M    1% /
    devtmpfs              205K   478  205K    1% /dev
    tmpfs                 209K     2  209K    1% /dev/shm
    tmpfs                 800K   778  800K    1% /run
    tmpfs                 1.0K     2  1022    1% /run/credentials/systemd-journald.service
    /dev/nvme0n1p2        512K   362  512K    1% /boot
    tmpfs                 1.0K     2  1022    1% /run/credentials/getty@tty1.service
    tmpfs                  42K    20   42K    1% /run/user/0
    ```

    `inode` 用于存储文件的元数据（如权限、创建时间、存储位置等），其数量在文件系统创建时固定。当 `inode` 使用率过高（接近或达到 100%）时，即使磁盘还有剩余空间，`inode` 耗尽后也无法创建新文件。

3. 排除指定类型的文件系统

    ```bash
    [root@localhost ~]# df -hx tmpfs
    ```

    ```console
    Filesystem           Size  Used Avail Use% Mounted on
    /dev/mapper/rl-root   17G  2.5G   15G  15% /
    devtmpfs             4.0M     0  4.0M   0% /dev
    /dev/nvme0n1p2       960M  247M  714M  26% /boot
    ```

    过滤掉临时文件系统（`tmpfs`）的信息。

### du （查看文件 / 目录占用）

du（Disk Usage）是 Linux 系统中用于查看文件和目录磁盘占用空间的命令，它能帮助用户分析哪些文件或目录占用了过多的存储空间。

```shell
du [选项] [文件/目录]
```

| 常见选项 | 作用                                                             |
| -------- | ---------------------------------------------------------------- |
| `-h`     | 以人类易读的格式（如 K、M、G）显示容量单位                       |
| `-a`     | 显示所有条目​​，不仅显示目录的大小，也显示其中每个文件的占用大小 |
| `-c`     | ​​显示总计​​，在输出的最后一行添加所有指定目标的总空间占用       |

| 参数        | 作用                                                                                                                                                       |
| ----------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `文件/目录` | 指定要查询的文件或目录路径。若为目录，会递归计算其下所有文件和子目录的总占用空间；若为文件，直接显示该文件的磁盘占用；若不指定，则默认以当前工作目录为目标 |

示例：

1. 快速查看当前目录总大小

    ```bash
    du -sh
    ```

    ```console
    65M     .
    ```

2. ​​查看目录详细信息

    ```bash
    du -h /var/log 
    ```

    ```console
    0       /var/log/private
    2.0M    /var/log/audit
    0       /var/log/sssd
    0       /var/log/chrony
    4.4M    /var/log/anaconda
    428K    /var/log/grafana
    4.0K    /var/log/promtail
    16K     /var/log/nginx
    46M     /var/log
    ```

    ```bash
    du -ah /var/log
    ```

    ```console
    0       /var/log/private
    20K     /var/log/wtmp
    4.0K    /var/log/lastlog
    2.0M    /var/log/audit/audit.log
    2.0M    /var/log/audit
    0       /var/log/sssd
    0       /var/log/chrony
    76K     /var/log/anaconda/anaconda.log
    1.1M    /var/log/anaconda/syslog
    4.0K    /var/log/anaconda/program.log
    144K    /var/log/anaconda/packaging.log
    164K    /var/log/anaconda/storage.log
    224K    /var/log/anaconda/lvm.log
    0       /var/log/anaconda/dnf.librepo.log
    4.0K    /var/log/anaconda/hawkey.log
    4.0K    /var/log/anaconda/dbus.log
    28K     /var/log/anaconda/lorax-packages.log
    2.7M    /var/log/anaconda/journal.log
    4.4M    /var/log/anaconda
    0       /var/log/firewalld
    48K     /var/log/dnf.log
    16K     /var/log/dnf.librepo.log
    4.0K    /var/log/dnf.rpm.log
    428K    /var/log/grafana/grafana.log
    428K    /var/log/grafana
    4.0K    /var/log/promtail/positions.yaml
    4.0K    /var/log/promtail
    4.0K    /var/log/nginx/access.log-20250717.gz
    4.0K    /var/log/nginx/error.log-20250717.gz
    4.0K    /var/log/nginx/access.log-20250812
    0       /var/log/nginx/access.log
    4.0K    /var/log/nginx/error.log-20250812
    0       /var/log/nginx/error.log
    16K     /var/log/nginx
    4.0K    /var/log/syslog
    4.0K    /var/log/test.log
    4.0K    /var/log/btmp-20250812
    0       /var/log/btmp
    4.0K    /var/log/hawkey.log-20250812
    4.0K    /var/log/hawkey.log
    4.0K    /var/log/cron-20250812
    4.0K    /var/log/cron
    0       /var/log/maillog-20250812
    0       /var/log/maillog
    39M     /var/log/messages-20250812
    8.0K    /var/log/messages
    12K     /var/log/secure-20250812
    0       /var/log/secure
    0       /var/log/spooler-20250812
    0       /var/log/spooler
    46M     /var/log
    ```

3. 找出大于 100MB 的文件并排序

    ```bash
    find / -type f -size +100M -exec du -h {} + | sort -rh
    ```

    ```console
    find: ‘/proc/2960/task/2960/fdinfo/6’: No such file or directory
    find: ‘/proc/2960/fdinfo/5’: No such file or directory
    375M    /usr/share/grafana/bin/grafana
    220M    /usr/lib/locale/locale-archive
    113M    /usr/local/bin/loki
    106M    /usr/local/bin/promtail
    0       /sys/devices/pci0000:00/0000:00:0f.0/resource1_wc
    0       /sys/devices/pci0000:00/0000:00:0f.0/resource1
    0       /proc/kcore
    ```

    `-exec du -h {} +` 是 `find` 的后续操作，对找到的文件执行 `du -h` 命令。`{}` 代表 `find` 找到的文件路径（占位符）;`+` 将所有找到的文件一次性传给 `du` 处理（比 `;` 更高效）。

### lsblk （查看分区与挂载）

`lsblk`（List Block Devices）用于​​列出所有可用的 **块设备**​​（如磁盘、分区、LVM 逻辑卷、RAID 阵列等）及其层级关系。

```shell
lsblk [选项] [设备名]
```

| 常见选项    | 作用                                                           |
| ----------- | -------------------------------------------------------------- |
| `-a`        | 显示所有块设备（包括空设备或未挂载设备，默认隐藏部分特殊设备） |
| `-f`        | 显示文件系统信息（如文件系统类型、UUID、挂载点）               |
| `-l`        | 以列表形式显示（非树形结构），适合查看简洁信息                 |
| `-m`        | 显示设备的权限信息（所有者、组、权限）                         |
| `-n`        | 不显示标题行（适合脚本处理输出）                               |
| `-o <列名>` | 自定义输出列（如 `NAME,SIZE,TYPE,MOUNTPOINT`）                 |
| `-p`        | 显示设备的完整路径（如 `/dev/sda` 而非 `sda`）                 |
| `-P`        | 以 ​`​key="value"` 格式​​输出（方便脚本解析）                  |
| `-t`        | 显示设备的拓扑结构信息（如总线、控制器等硬件关联）             |

| 参数     | 作用                                     |
| -------- | ---------------------------------------- |
| `设备名` | 不指定设备名时，默认显示所有块设备信息。 |

```bash
lsblk
```

```console
NAME        MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
sr0          11:0    1  1.6G  0 rom  
nvme0n1     259:0    0   20G  0 disk 
├─nvme0n1p1 259:1    0    1M  0 part 
├─nvme0n1p2 259:2    0    1G  0 part /boot
└─nvme0n1p3 259:3    0   19G  0 part 
  ├─rl-root 253:0    0   17G  0 lvm  /
  └─rl-swap 253:1    0    2G  0 lvm  [SWAP]
```

各列含义：

- `NAME`：设备名称（如 `nvme0n1` 是 NVMe 硬盘，`nvme0n1p2` 是其第二个分区）
- `MAJ:MIN`：主设备号：次设备号（内核识别设备的标识）
- `RM`：是否为可移动设备（`1` 是，`0` 否，如 `sr0` 是光盘驱动器，通常为可移动）
- `SIZE`：设备大小（如 20G 表示硬盘总容量 20GB）
- `RO`：是否为只读设备（`1` 是，`0` 否）
- `TYPE`：设备类型（`disk` 为物理硬盘，`part` 为分区，`lvm` 为逻辑卷，`rom` 为光盘等）
- `MOUNTPOINTS`：挂载点（如 `/boot` 表示该分区挂载到 `/boot` 目录，空表示未挂载）

示例：

1. 查看所有设备及文件系统信息

    ```shell
    NAME FSTYPE FSVER LABEL                 UUID                                   FSAVAIL FSUSE% MOUNTPOINTS
    sr0  iso966 Jolie Rocky-10-0-x86_64-dvd 2025-05-31-19-44-34-00                                
    nvme0n1
    │                                                                                             
    ├─nvme0n1p1
    │                                                                                             
    ├─nvme0n1p2
    │    xfs                                8a23603e-7674-4fd5-8515-a757bd9a2fc1    713.1M    26% /boot
    └─nvme0n1p3
      │  LVM2_m LVM2                        WXZW8z-zdkm-Tk5r-XLB8-em2f-1fAD-N0sZnB                
      ├─rl-root
      │  xfs                                832de919-24b7-4cc3-937e-27eb203ceb8e     14.5G    14% /
      └─rl-swap
            swap   1                           10226468-de0a-42a6-a380-9c3b5e1f04a4                  [SWAP]
    ```

    会额外显示每个分区的文件系统类型（如 ext4、xfs）和 UUID。

2. 只显示指定设备的信息

    ```bash
    lsblk -p /dev/nvme0n1p3
    ```

    ```console
    NAME                  MAJ:MIN RM SIZE RO TYPE MOUNTPOINTS
    /dev/nvme0n1p3        259:3    0  19G  0 part 
    ├─/dev/mapper/rl-root 253:0    0  17G  0 lvm  /
    └─/dev/mapper/rl-swap 253:1    0   2G  0 lvm  [SWAP]
    ```

    仅展示 `nvme0n1p3` 硬盘及其分区结构，并且显示设备的完整路径。

3. 自定义输出列（名称、大小、类型、分区表类型、挂载点）

    ```bash
    lsblk -no NAME,SIZE,TYPE,PTTYPE,MOUNTPOINTS
    ```

    ```console
    sr0          1.6G rom  PMBR 
    nvme0n1       20G disk gpt  
    ├─nvme0n1p1    1M part gpt  
    ├─nvme0n1p2    1G part gpt  /boot
    └─nvme0n1p3   19G part gpt  
    ├─rl-root   17G lvm       /
    └─rl-swap    2G lvm       [SWAP]
    ```

    简化输出，只保留关键信息，适合脚本。

4. 解析友好格式（键值对）​

    ```bash
    lsblk -P
    ```

    ```console
    NAME="sr0" MAJ:MIN="11:0" RM="1" SIZE="1.6G" RO="0" TYPE="rom" MOUNTPOINTS=""
    NAME="nvme0n1" MAJ:MIN="259:0" RM="0" SIZE="20G" RO="0" TYPE="disk" MOUNTPOINTS=""
    NAME="nvme0n1p1" MAJ:MIN="259:1" RM="0" SIZE="1M" RO="0" TYPE="part" MOUNTPOINTS=""
    NAME="nvme0n1p2" MAJ:MIN="259:2" RM="0" SIZE="1G" RO="0" TYPE="part" MOUNTPOINTS="/boot"
    NAME="nvme0n1p3" MAJ:MIN="259:3" RM="0" SIZE="19G" RO="0" TYPE="part" MOUNTPOINTS=""
    NAME="rl-root" MAJ:MIN="253:0" RM="0" SIZE="17G" RO="0" TYPE="lvm" MOUNTPOINTS="/"
    NAME="rl-swap" MAJ:MIN="253:1" RM="0" SIZE="2G" RO="0" TYPE="lvm" MOUNTPOINTS="[SWAP]"
    ```

### blkid（查看文件系统属性​​）

`blkid` 是 Linux 系统中用于查询或显示块设备（如硬盘分区、U 盘、逻辑卷等）的文件系统信息（如 UUID、文件系统类型、标签等）的命令，常用于识别设备的唯一标识，方便挂载配置或系统管理。

```shell
blkid [选项] [设备名]
```

| 常见选项           | 说明                                                                                                             |
| ------------------ | ---------------------------------------------------------------------------------------------------------------- |
| `-o <FORMAT>`      | 输出格式：`value`（仅值）、`device`（设备名）、`full`（完整信息）、`export`（环境变量格式）、 `list`（列表格式） |
| `-s <TAG>`         | 筛选输出信息（如 `-s UUID` 只显示 UUID）                                                                         |
| `-t <KEY>=<VALUE>` | 查找特定键值对应的设备（如 `-t UUID="abc123"`）                                                                  |
| `-U <UUID>`        | 根据 UUID 查找设备路径                                                                                           |
| `-p`               | 安全探测​​，低级别访问设备（避免挂载或损坏）                                                                     |
| `-i`               | 显示额外信息（如文件系统特性）                                                                                   |

| 参数     | 作用                                     |
| -------- | ---------------------------------------- |
| `设备名` | 不指定设备名时，默认显示所有块设备信息。 |

```bash
blkid
```

```console
/dev/mapper/rl-swap: UUID="10226468-de0a-42a6-a380-9c3b5e1f04a4" TYPE="swap"
/dev/nvme0n1p3: UUID="WXZW8z-zdkm-Tk5r-XLB8-em2f-1fAD-N0sZnB" TYPE="LVM2_member" PARTUUID="78c03e5c-856e-4a0f-b343-7ca201cf560d"
/dev/nvme0n1p2: UUID="8a23603e-7674-4fd5-8515-a757bd9a2fc1" BLOCK_SIZE="512" TYPE="xfs" PARTUUID="0e2acec1-d048-4411-ba44-59baed493117"
/dev/sr0: BLOCK_SIZE="2048" UUID="2025-05-31-19-44-34-00" LABEL="Rocky-10-0-x86_64-dvd" TYPE="iso9660" PTTYPE="PMBR"
/dev/mapper/rl-root: UUID="832de919-24b7-4cc3-937e-27eb203ceb8e" BLOCK_SIZE="512" TYPE="xfs"
/dev/nvme0n1p1: PARTUUID="25610f9b-2479-45de-a4b3-04f03c1868d1"
```

各字段含义：

- `设备路径`：如 `/dev/nvme0n1p1`，表示块设备的位置
- `UUID`：文件系统的唯一标识符，全局唯一，常用于 `/etc/fstab` 挂载配置
- `TYPE`：文件系统类型
- `PARTUUID`：分区的唯一标识符，针对分区本身，而非文件系统
- `LABEL`：用户自定义卷标（可用 `tune2fs -L` 或 `ntfslabel` 修改）
- ​`​PTTYPE`​​：分区表类型

示例：

1. 查找所有设备的 UUID 和类型​​

    ```shell
    device                    fs_type    label       mount point                   UUID
    --------------------------------------------------------------------------------------------------------------------
    /dev/mapper/rl-swap       swap                   [SWAP]                        10226468-de0a-42a6-a380-9c3b5e1f04a4
    /dev/nvme0n1p3            LVM2_member            (in use)                      WXZW8z-zdkm-Tk5r-XLB8-em2f-1fAD-N0sZnB
    /dev/nvme0n1p2            xfs                    /boot                         8a23603e-7674-4fd5-8515-a757bd9a2fc1
    /dev/sr0                  iso9660    Rocky-10-0-x86_64-dvd (not mounted)       2025-05-31-19-44-34-00
    /dev/mapper/rl-root       xfs                    /                             832de919-24b7-4cc3-937e-27eb203ceb8e
    /dev/nvme0n1p1                                   (not mounted)     
    ```

2. 仅显示 UUID

    ```bash
    blkid -s UUID -o value /dev/nvme0n1p2
    ```

    ```console
    8a23603e-7674-4fd5-8515-a757bd9a2fc1
    ```

    获取设备块 UUID，一般用于用于脚本处理。

3. 生成 fstab 兼容格式​​

    ```bash
    blkid -s UUID -s TYPE -o export /dev/nvme0n1p2
    ```

    ```console
    DEVNAME=/dev/nvme0n1p2
    UUID=8a23603e-7674-4fd5-8515-a757bd9a2fc1
    TYPE=xfs
    ```

    可以将此输出复制到 /`etc/fstab` 文件中，并安全挂载设备，例如：

    ::: code-group
    ```shell [/etc/fstab]
    ……
    UUID=8a23603e-7674-4fd5-8515-a757bd9a2fc1  /boot  xfs  defaults  0 0 # [!code ++]
    ```
    :::

4. 检测文件系统特性​

    ```bash
    blkid -pi /dev/nvme0n1p2
    ```

    ```console
    /dev/nvme0n1p2: UUID="8a23603e-7674-4fd5-8515-a757bd9a2fc1" FSSIZE="1006632960" FSLASTBLOCK="262144" FSBLOCKSIZE="4096" BLOCK_SIZE="512" TYPE="xfs" USAGE="filesystem" MINIMUM_IO_SIZE="512" PHYSICAL_SECTOR_SIZE="512" DISKSEQ="1" LOGICAL_SECTOR_SIZE="512" PART_ENTRY_SCHEME="gpt" PART_ENTRY_UUID="0e2acec1-d048-4411-ba44-59baed493117" PART_ENTRY_TYPE="bc13c2ff-59e6-4262-a352-b275fd6f7172" PART_ENTRY_NUMBER="2" PART_ENTRY_OFFSET="4096" PART_ENTRY_SIZE="2097152" PART_ENTRY_DISK="259:0"
    ```

    这条命令用于对 `/dev/nvme0n1p2` 分区进行低级别安全探测，输出包含该分区的详细技术参数。

    核心信息：

    - `UUID="8a23603e-..."`：分区的唯一标识符，用于稳定标识设备
    - `TYPE="xfs"`：文件系统类型为 XFS
    - `FSSIZE="1006632960"`：文件系统总大小（约 1GB）
    - `BLOCK_SIZE="512"` 和 `FSBLOCKSIZE="4096"`：物理块大小（512B）和文件系统块大小（4KB）

    分区表相关：

    - `PART_ENTRY_SCHEME="gpt"`：使用 GPT 分区表
    - `PART_ENTRY_NUMBER="2"`：该分区是磁盘上的第 2 个分区

    硬件特性：

    - `PHYSICAL_SECTOR_SIZE="512"`：硬盘物理扇区大小，影响读写性能
